!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.fluent=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(er=arguments[1],er instanceof Error)throw er;throw TypeError('Uncaught, unspecified "error" event.')}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];handler.apply(this,args)}else if(isObject(handler)){for(len=arguments.length,args=new Array(len-1),i=1;len>i;i++)args[i-1]=arguments[i];for(listeners=handler.slice(),len=listeners.length,i=0;len>i;i++)listeners[i].apply(this,args)}return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned){var m;m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,m&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[type].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-->0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(0>position)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){var ret;return ret=this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.listenerCount=function(emitter,type){var ret;return ret=emitter._events&&emitter._events[type]?isFunction(emitter._events[type])?1:emitter._events[type].length:0}},{}],2:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Map:require("./polyfill")},{"./is-implemented":3,"./polyfill":51}],3:[function(require,module){"use strict";module.exports=function(){var map,iterator,result;if("function"!=typeof Map)return!1;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return 3!==map.size?!1:"function"!=typeof map.clear?!1:"function"!=typeof map.delete?!1:"function"!=typeof map.entries?!1:"function"!=typeof map.forEach?!1:"function"!=typeof map.get?!1:"function"!=typeof map.has?!1:"function"!=typeof map.keys?!1:"function"!=typeof map.set?!1:"function"!=typeof map.values?!1:(iterator=map.entries(),result=iterator.next(),result.done!==!1?!1:result.value?"raz"!==result.value[0]?!1:"one"!==result.value[1]?!1:!0:!1)}},{}],4:[function(require,module){"use strict";module.exports=function(){return"undefined"==typeof Map?!1:"[object Map]"===Object.prototype.toString.call(Map.prototype)}()},{}],5:[function(require,module){"use strict";module.exports=require("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":30}],6:[function(require,module){"use strict";var MapIterator,setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("es6-iterator"),toStringTagSymbol=require("es6-symbol").toStringTag,kinds=require("./iterator-kinds"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind;MapIterator=module.exports=function(map,kind){return this instanceof MapIterator?(Iterator.call(this,map.__mapKeysData__,map),kind&&kinds[kind]||(kind="key+value"),void defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})):new MapIterator(map,kind)},setPrototypeOf&&setPrototypeOf(MapIterator,Iterator),MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d(function(i){return"value"===this.__kind__?this.__values__[i]:"key"===this.__kind__?this.__list__[i]:[this.__list__[i],this.__values__[i]]}),_unBind:d(function(){this.__values__=null,unBind.call(this)}),toString:d(function(){return"[object Map Iterator]"})}),Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},{"./iterator-kinds":5,d:8,"es5-ext/object/set-prototype-of":31,"es6-iterator":43,"es6-symbol":47}],7:[function(require,module){"use strict";var define,copy=require("es5-ext/object/copy"),map=require("es5-ext/object/map"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty;define=function(name,desc,bindTo){var dgs,value=validValue(desc)&&callable(desc.value);return dgs=copy(desc),delete dgs.writable,delete dgs.value,dgs.get=function(){return hasOwnProperty.call(this,name)?value:(desc.value=bind.call(value,null==bindTo?this:this[bindTo]),defineProperty(this,name,desc),this[name])},dgs},module.exports=function(props){var bindTo=arguments[1];return map(props,function(desc,name){return define(name,desc,bindTo)})}},{"es5-ext/object/copy":20,"es5-ext/object/map":28,"es5-ext/object/valid-callable":34,"es5-ext/object/valid-value":35}],8:[function(require,module){"use strict";var d,assign=require("es5-ext/object/assign"),normalizeOpts=require("es5-ext/object/normalize-options"),isCallable=require("es5-ext/object/is-callable"),contains=require("es5-ext/string/#/contains");d=module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],null==dscr?(c=w=!0,e=!1):(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign(normalizeOpts(options),desc):desc},d.gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],null==get?get=void 0:isCallable(get)?null==set?set=void 0:isCallable(set)||(options=set,set=void 0):(options=get,get=set=void 0),null==dscr?(c=!0,e=!1):(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")),desc={get:get,set:set,configurable:c,enumerable:e},options?assign(normalizeOpts(options),desc):desc}},{"es5-ext/object/assign":17,"es5-ext/object/is-callable":23,"es5-ext/object/normalize-options":29,"es5-ext/string/#/contains":36}],9:[function(require,module){"use strict";var value=require("../../object/valid-value");module.exports=function(){return value(this).length=0,this}},{"../../object/valid-value":35}],10:[function(require,module){"use strict";var toPosInt=require("../../number/to-pos-integer"),value=require("../../object/valid-value"),indexOf=Array.prototype.indexOf,hasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,l,fromIndex,val;if(searchElement===searchElement)return indexOf.apply(this,arguments);for(l=toPosInt(value(this).length),fromIndex=arguments[1],fromIndex=isNaN(fromIndex)?0:fromIndex>=0?floor(fromIndex):toPosInt(this.length)-floor(abs(fromIndex)),i=fromIndex;l>i;++i)if(hasOwnProperty.call(this,i)&&(val=this[i],val!==val))return i;return-1}},{"../../number/to-pos-integer":15,"../../object/valid-value":35}],11:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Math.sign:require("./shim")},{"./is-implemented":12,"./shim":13}],12:[function(require,module){"use strict";module.exports=function(){var sign=Math.sign;return"function"!=typeof sign?!1:1===sign(10)&&-1===sign(-20)}},{}],13:[function(require,module){"use strict";module.exports=function(value){return value=Number(value),isNaN(value)||0===value?value:value>0?1:-1}},{}],14:[function(require,module){"use strict";var sign=require("../math/sign"),abs=Math.abs,floor=Math.floor;module.exports=function(value){return isNaN(value)?0:(value=Number(value),0!==value&&isFinite(value)?sign(value)*floor(abs(value)):value)}},{"../math/sign":11}],15:[function(require,module){"use strict";var toInteger=require("./to-integer"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},{"./to-integer":14}],16:[function(require,module){"use strict";var isCallable=require("./is-callable"),callable=require("./valid-callable"),value=require("./valid-value"),call=Function.prototype.call,keys=Object.keys,propertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];return obj=Object(value(obj)),callable(cb),list=keys(obj),compareFn&&list.sort(isCallable(compareFn)?compareFn.bind(obj):void 0),list[method](function(key,index){return propertyIsEnumerable.call(obj,key)?call.call(cb,thisArg,obj[key],key,obj,index):defVal})}}},{"./is-callable":23,"./valid-callable":34,"./valid-value":35}],17:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Object.assign:require("./shim")},{"./is-implemented":18,"./shim":19}],18:[function(require,module){"use strict";module.exports=function(){var obj,assign=Object.assign;return"function"!=typeof assign?!1:(obj={foo:"raz"},assign(obj,{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}},{}],19:[function(require,module){"use strict";var keys=require("../keys"),value=require("../valid-value"),max=Math.max;module.exports=function(dest,src){var error,i,assign,l=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;l>i;++i)src=arguments[i],keys(src).forEach(assign);if(void 0!==error)throw error;return dest}},{"../keys":25,"../valid-value":35}],20:[function(require,module){"use strict";var assign=require("./assign"),value=require("./valid-value");module.exports=function(obj){var copy=Object(value(obj));return copy!==obj?copy:assign({},obj)}},{"./assign":17,"./valid-value":35}],21:[function(require,module){"use strict";var shim,create=Object.create;require("./set-prototype-of/is-implemented")()||(shim=require("./set-prototype-of/shim")),module.exports=function(){var nullObject,props,desc;return shim?1!==shim.level?create:(nullObject={},props={},desc={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(name){return"__proto__"===name?void(props[name]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(props[name]=desc)}),Object.defineProperties(nullObject,props),Object.defineProperty(shim,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:nullObject}),function(prototype,props){return create(null===prototype?nullObject:prototype,props)}):create}()},{"./set-prototype-of/is-implemented":32,"./set-prototype-of/shim":33}],22:[function(require,module){"use strict";module.exports=require("./_iterate")("forEach")},{"./_iterate":16}],23:[function(require,module){"use strict";module.exports=function(obj){return"function"==typeof obj}},{}],24:[function(require,module){"use strict";var map={"function":!0,object:!0};module.exports=function(x){return null!=x&&map[typeof x]||!1}},{}],25:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Object.keys:require("./shim")},{"./is-implemented":26,"./shim":27}],26:[function(require,module){"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],27:[function(require,module){"use strict";var keys=Object.keys;module.exports=function(object){return keys(null==object?object:Object(object))}},{}],28:[function(require,module){"use strict";var callable=require("./valid-callable"),forEach=require("./for-each"),call=Function.prototype.call;module.exports=function(obj,cb){var o={},thisArg=arguments[2];return callable(cb),forEach(obj,function(value,key,obj,index){o[key]=call.call(cb,thisArg,value,key,obj,index)}),o}},{"./for-each":22,"./valid-callable":34}],29:[function(require,module){"use strict";var process,assign=require("./assign"),forEach=Array.prototype.forEach,create=Object.create,getPrototypeOf=Object.getPrototypeOf;process=function(src,obj){var proto=getPrototypeOf(src);return assign(proto?process(proto,obj):obj,src)},module.exports=function(){var result=create(null);return forEach.call(arguments,function(options){null!=options&&process(Object(options),result)}),result}},{"./assign":17}],30:[function(require,module){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(){var set=create(null);return forEach.call(arguments,function(name){set[name]=!0}),set}},{}],31:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Object.setPrototypeOf:require("./shim")},{"./is-implemented":32,"./shim":33}],32:[function(require,module){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,x={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;return"function"!=typeof setPrototypeOf?!1:getPrototypeOf(setPrototypeOf(customCreate(null),x))===x}},{}],33:[function(require,module){"use strict";var validate,isObject=require("../is-object"),value=require("../valid-value"),isPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0};validate=function(obj,prototype){if(value(obj),null===prototype||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")},module.exports=function(status){var fn,set;return status?(2===status.level?status.set?(set=status.set,fn=function(obj,prototype){return set.call(validate(obj,prototype),prototype),obj}):fn=function(obj,prototype){return validate(obj,prototype).__proto__=prototype,obj}:fn=function self(obj,prototype){var isNullBase;return validate(obj,prototype),isNullBase=isPrototypeOf.call(self.nullPolyfill,obj),isNullBase&&delete self.nullPolyfill.__proto__,null===prototype&&(prototype=self.nullPolyfill),obj.__proto__=prototype,isNullBase&&defineProperty(self.nullPolyfill,"__proto__",nullDesc),obj},Object.defineProperty(fn,"level",{configurable:!1,enumerable:!1,writable:!1,value:status.level})):null}(function(){var set,x=Object.create(null),y={},desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{set=desc.set,set.call(x,y)}catch(ignore){}if(Object.getPrototypeOf(x)===y)return{set:set,level:2}}return x.__proto__=y,Object.getPrototypeOf(x)===y?{level:2}:(x={},x.__proto__=y,Object.getPrototypeOf(x)===y?{level:1}:!1)}()),require("../create")},{"../create":21,"../is-object":24,"../valid-value":35}],34:[function(require,module){"use strict";module.exports=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn}},{}],35:[function(require,module){"use strict";module.exports=function(value){if(null==value)throw new TypeError("Cannot use null or undefined");return value}},{}],36:[function(require,module){"use strict";module.exports=require("./is-implemented")()?String.prototype.contains:require("./shim")},{"./is-implemented":37,"./shim":38}],37:[function(require,module){"use strict";var str="razdwatrzy";module.exports=function(){return"function"!=typeof str.contains?!1:str.contains("dwa")===!0&&str.contains("foo")===!1}},{}],38:[function(require,module){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},{}],39:[function(require,module){"use strict";var toString=Object.prototype.toString,id=toString.call("");module.exports=function(x){return"string"==typeof x||x&&"object"==typeof x&&(x instanceof String||toString.call(x)===id)||!1}},{}],40:[function(require,module){"use strict";var ArrayIterator,setPrototypeOf=require("es5-ext/object/set-prototype-of"),contains=require("es5-ext/string/#/contains"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty;ArrayIterator=module.exports=function(arr,kind){return this instanceof ArrayIterator?(Iterator.call(this,arr),kind=kind?contains.call(kind,"key+value")?"key+value":contains.call(kind,"key")?"key":"value":"value",void defineProperty(this,"__kind__",d("",kind))):new ArrayIterator(arr,kind)},setPrototypeOf&&setPrototypeOf(ArrayIterator,Iterator),ArrayIterator.prototype=Object.create(Iterator.prototype,{constructor:d(ArrayIterator),_resolve:d(function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i}),toString:d(function(){return"[object Array Iterator]"})})},{"./":43,d:8,"es5-ext/object/set-prototype-of":31,"es5-ext/string/#/contains":36}],41:[function(require,module){"use strict";var callable=require("es5-ext/object/valid-callable"),isString=require("es5-ext/string/is-string"),get=require("./get"),isArray=Array.isArray,call=Function.prototype.call;module.exports=function(iterable,cb){var mode,result,doBreak,broken,i,l,char,code,thisArg=arguments[2];if(isArray(iterable)?mode="array":isString(iterable)?mode="string":iterable=get(iterable),callable(cb),doBreak=function(){broken=!0},"array"===mode)return void iterable.some(function(value){return call.call(cb,thisArg,value,doBreak),broken?!0:void 0});if("string"!==mode)for(result=iterable.next();!result.done;){if(call.call(cb,thisArg,result.value,doBreak),broken)return;result=iterable.next()}else for(l=iterable.length,i=0;l>i&&(char=iterable[i],l>i+1&&(code=char.charCodeAt(0),code>=55296&&56319>=code&&(char+=iterable[++i])),call.call(cb,thisArg,char,doBreak),!broken);++i);}},{"./get":42,"es5-ext/object/valid-callable":34,"es5-ext/string/is-string":39}],42:[function(require,module){"use strict";var isString=require("es5-ext/string/is-string"),ArrayIterator=require("./array"),StringIterator=require("./string"),iterable=require("./valid-iterable"),iteratorSymbol=require("es6-symbol").iterator;module.exports=function(obj){return"function"==typeof iterable(obj)[iteratorSymbol]?obj[iteratorSymbol]():isString(obj)?new StringIterator(obj):new ArrayIterator(obj)}},{"./array":40,"./string":45,"./valid-iterable":46,"es5-ext/string/is-string":39,"es6-symbol":47}],43:[function(require,module){"use strict";var Iterator,clear=require("es5-ext/array/#/clear"),toPosInt=require("es5-ext/number/to-pos-integer"),assign=require("es5-ext/object/assign"),callable=require("es5-ext/object/valid-callable"),value=require("es5-ext/object/valid-value"),d=require("d"),autoBind=require("d/auto-bind"),Symbol=require("es6-symbol"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties;module.exports=Iterator=function(list,context){return this instanceof Iterator?(defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)}),void(context&&(callable(context.on),context.on("_add",this._onAdd),context.on("_delete",this._onDelete),context.on("_clear",this._onClear)))):new Iterator(list,context)},defineProperties(Iterator.prototype,assign({constructor:d(Iterator),_next:d(function(){var i,l;if(this.__list__)return this.__redo__&&(i=this.__redo__.shift(),void 0!==i)?i:(l=toPosInt(this.__list__.length),this.__nextIndex__<l?this.__nextIndex__++:void this._unBind())}),next:d(function(){return this._createResult(this._next())}),_createResult:d(function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}}),_resolve:d(function(i){return this.__list__[i]}),_unBind:d(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:d(function(){return"[object Iterator]"})},autoBind({_onAdd:d(function(index){if(!(index>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void defineProperty(this,"__redo__",d("c",[index]));this.__redo__.forEach(function(redo,i){redo>=index&&(this.__redo__[i]=++redo)},this),this.__redo__.push(index)}}),_onDelete:d(function(index){var i;index>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(i=this.__redo__.indexOf(index),-1!==i&&this.__redo__.splice(i,1),this.__redo__.forEach(function(redo,i){redo>index&&(this.__redo__[i]=--redo)},this)))}),_onClear:d(function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0})}))),defineProperty(Iterator.prototype,Symbol.iterator,d(function(){return this})),defineProperty(Iterator.prototype,Symbol.toStringTag,d("","Iterator"))},{d:8,"d/auto-bind":7,"es5-ext/array/#/clear":9,"es5-ext/number/to-pos-integer":15,"es5-ext/object/assign":17,"es5-ext/object/valid-callable":34,"es5-ext/object/valid-value":35,"es6-symbol":47}],44:[function(require,module){"use strict";var isString=require("es5-ext/string/is-string"),iteratorSymbol=require("es6-symbol").iterator,isArray=Array.isArray;module.exports=function(value){return null==value?!1:isArray(value)?!0:isString(value)?!0:"function"==typeof value[iteratorSymbol]}},{"es5-ext/string/is-string":39,"es6-symbol":47}],45:[function(require,module){"use strict";var StringIterator,setPrototypeOf=require("es5-ext/object/set-prototype-of"),d=require("d"),Iterator=require("./"),defineProperty=Object.defineProperty;StringIterator=module.exports=function(str){return this instanceof StringIterator?(str=String(str),Iterator.call(this,str),void defineProperty(this,"__length__",d("",str.length))):new StringIterator(str)},setPrototypeOf&&setPrototypeOf(StringIterator,Iterator),StringIterator.prototype=Object.create(Iterator.prototype,{constructor:d(StringIterator),_next:d(function(){return this.__list__?this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind():void 0}),_resolve:d(function(i){var code,char=this.__list__[i];return this.__nextIndex__===this.__length__?char:(code=char.charCodeAt(0),code>=55296&&56319>=code?char+this.__list__[this.__nextIndex__++]:char)}),toString:d(function(){return"[object String Iterator]"})})},{"./":43,d:8,"es5-ext/object/set-prototype-of":31}],46:[function(require,module){"use strict";var isIterable=require("./is-iterable");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},{"./is-iterable":44}],47:[function(require,module){"use strict";module.exports=require("./is-implemented")()?Symbol:require("./polyfill")},{"./is-implemented":48,"./polyfill":49}],48:[function(require,module){"use strict";module.exports=function(){var symbol;if("function"!=typeof Symbol)return!1;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return!1}return"symbol"==typeof Symbol.iterator?!0:"object"!=typeof Symbol.isConcatSpreadable?!1:"object"!=typeof Symbol.isRegExp?!1:"object"!=typeof Symbol.iterator?!1:"object"!=typeof Symbol.toPrimitive?!1:"object"!=typeof Symbol.toStringTag?!1:"object"!=typeof Symbol.unscopables?!1:!0}},{}],49:[function(require,module){"use strict";var generateName,Symbol,d=require("d"),create=Object.create,defineProperties=Object.defineProperties;generateName=function(){var created=create(null);return function(desc){for(var postfix=0;created[desc+(postfix||"")];)++postfix;return desc+=postfix||"",created[desc]=!0,"@@"+desc}}(),module.exports=Symbol=function(description){var symbol;if(this instanceof Symbol)throw new TypeError("TypeError: Symbol is not a constructor");return symbol=create(Symbol.prototype),description=void 0===description?"":String(description),defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))})},Object.defineProperties(Symbol,{create:d("",Symbol("create")),hasInstance:d("",Symbol("hasInstance")),isConcatSpreadable:d("",Symbol("isConcatSpreadable")),isRegExp:d("",Symbol("isRegExp")),iterator:d("",Symbol("iterator")),toPrimitive:d("",Symbol("toPrimitive")),toStringTag:d("",Symbol("toStringTag")),unscopables:d("",Symbol("unscopables"))}),defineProperties(Symbol.prototype,{properToString:d(function(){return"Symbol ("+this.__description__+")"}),toString:d("",function(){return this.__name__})}),Object.defineProperty(Symbol.prototype,Symbol.toPrimitive,d("",function(){throw new TypeError("Conversion of symbol objects is not allowed")})),Object.defineProperty(Symbol.prototype,Symbol.toStringTag,d("c","Symbol"))},{d:8}],50:[function(require,module,exports){"use strict";var on,once,off,emit,methods,descriptors,base,d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"==typeof data[type]?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},once=function(type,listener){var once,self;return callable(listener),self=this,on.call(this,type,once=function(){off.call(self,type,once),apply.call(listener,this,arguments)}),once.__eeOnceListener__=listener,this},off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(data=this.__ee__,!data[type])return this;if(listeners=data[type],"object"==typeof listeners)for(i=0;candidate=listeners[i];++i)(candidate===listener||candidate.__eeOnceListener__===listener)&&(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else(listeners===listener||listeners.__eeOnceListener__===listener)&&delete data[type];return this},emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"==typeof listeners){for(l=arguments.length,args=new Array(l-1),i=1;l>i;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;l>i;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}},methods={on:on,once:once,off:off,emit:emit},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods},{d:8,"es5-ext/object/valid-callable":34}],51:[function(require,module){"use strict";var MapPoly,clear=require("es5-ext/array/#/clear"),eIndexOf=require("es5-ext/array/#/e-index-of"),setPrototypeOf=require("es5-ext/object/set-prototype-of"),callable=require("es5-ext/object/valid-callable"),validValue=require("es5-ext/object/valid-value"),d=require("d"),ee=require("event-emitter"),Symbol=require("es6-symbol"),iterator=require("es6-iterator/valid-iterable"),forOf=require("es6-iterator/for-of"),Iterator=require("./lib/iterator"),isNative=require("./is-native-implemented"),call=Function.prototype.call,defineProperties=Object.defineProperties;module.exports=MapPoly=function(){var keys,values,iterable=arguments[0];if(!(this instanceof MapPoly))return new MapPoly(iterable);if(void 0!==this.__mapKeysData__)throw new TypeError(this+" cannot be reinitialized");null!=iterable&&iterator(iterable),defineProperties(this,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])}),iterable&&forOf(iterable,function(value){var key=validValue(value)[0];value=value[1],-1===eIndexOf.call(keys,key)&&(keys.push(key),values.push(value))},this)},isNative&&(setPrototypeOf&&setPrototypeOf(MapPoly,Map),MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})),ee(defineProperties(MapPoly.prototype,{clear:d(function(){this.__mapKeysData__.length&&(clear.call(this.__mapKeysData__),clear.call(this.__mapValuesData__),this.emit("_clear"))}),"delete":d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);return-1===index?!1:(this.__mapKeysData__.splice(index,1),this.__mapValuesData__.splice(index,1),this.emit("_delete",index,key),!0)}),entries:d(function(){return new Iterator(this,"key+value")}),forEach:d(function(cb){var iterator,result,thisArg=arguments[1];for(callable(cb),iterator=this.entries(),result=iterator._next();void 0!==result;)call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this),result=iterator._next()}),get:d(function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(-1!==index)return this.__mapValuesData__[index]
}),has:d(function(key){return-1!==eIndexOf.call(this.__mapKeysData__,key)}),keys:d(function(){return new Iterator(this,"key")}),set:d(function(key,value){var emit,index=eIndexOf.call(this.__mapKeysData__,key);return-1===index&&(index=this.__mapKeysData__.push(key)-1,emit=!0),this.__mapValuesData__[index]=value,emit&&this.emit("_add",index,key),this}),size:d.gs(function(){return this.__mapKeysData__.length}),values:d(function(){return new Iterator(this,"value")}),toString:d(function(){return"[object Map]"})})),Object.defineProperty(MapPoly.prototype,Symbol.iterator,d(function(){return this.entries()})),Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},{"./is-native-implemented":4,"./lib/iterator":6,d:8,"es5-ext/array/#/clear":9,"es5-ext/array/#/e-index-of":10,"es5-ext/object/set-prototype-of":31,"es5-ext/object/valid-callable":34,"es5-ext/object/valid-value":35,"es6-iterator/for-of":41,"es6-iterator/valid-iterable":46,"es6-symbol":47,"event-emitter":50}],52:[function(require,module){"use strict";function ToObject(val){if(null==val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}module.exports=Object.assign||function(target){for(var pendingException,from,keys,to=ToObject(target),s=1;s<arguments.length;s++){from=arguments[s],keys=Object.keys(Object(from));for(var i=0;i<keys.length;i++)try{to[keys[i]]=from[keys[i]]}catch(err){void 0===pendingException&&(pendingException=err)}}if(pendingException)throw pendingException;return to}},{}],53:[function(require,module){var Dispatch=function(){"use strict";function Dispatch(payload){this.payload=payload,this.isPending={},this.isHandled={}}var DP$0=(function(o,t){return o.__proto__={a:t},o.a===t}({},{}),Object.defineProperty),GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,s){for(var p in s)s.hasOwnProperty(p)&&DP$0(t,p,GOPD$0(s,p));return t},proto$0={};return DP$0(Dispatch,"prototype",{configurable:!1,enumerable:!1,writable:!1}),proto$0.dispatchToTable=function(id,table){var action=(params=this.payload).action,params=params.params;table.has(action)&&(this.isPending[id]=!0,table.get(action).call(action,params),this.isHandled[id]=!0,this.isPending[id]=!1)},MIXIN$0(Dispatch.prototype,proto$0),proto$0=void 0,Dispatch}();module.exports=Dispatch},{}],54:[function(require,module){function proxy(dest,src,methods){methods.forEach(function(method){src[method]&&(dest[method]=function(){return src[method].apply(src,arguments)})})}var Map=require("es6-map"),assign=require("object-assign"),DispatchTable=function(){"use strict";function DispatchTable(handlers,spec){this.handlers=new Map(handlers),proxy(this,this.handlers,["has","get","clear"]),assign(this,spec)}{var DP$0=(function(o,t){return o.__proto__={a:t},o.a===t}({},{}),Object.defineProperty);Object.getOwnPropertyDescriptor}return DP$0(DispatchTable,"prototype",{configurable:!1,enumerable:!1,writable:!1}),DispatchTable}();module.exports=DispatchTable},{"es6-map":2,"object-assign":52}],55:[function(require,module){var invariant=(require("es6-map"),require("./lib/invariant")),warning=require("./lib/warning"),Dispatch=require("./Dispatch"),createActions=require("./lib/createActions"),lastId=1,IS_DISPATCHING=!1,dispatchTables={},Dispatcher=function(){"use strict";function Dispatcher(){this.queue=[]}var DP$0=(function(o,t){return o.__proto__={a:t},o.a===t}({},{}),Object.defineProperty),GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,s){for(var p in s)s.hasOwnProperty(p)&&DP$0(t,p,GOPD$0(s,p));return t},proto$0={};return DP$0(Dispatcher,"prototype",{configurable:!1,enumerable:!1,writable:!1}),proto$0.register=function(table){var id="id"+ ++lastId;return dispatchTables[id]=table,id},proto$0.unregister=function(id){invariant(dispatchTables[id],"Dispatcher.unregister(...): "+id+" does not map to a registered dispatch table."),dispatchTables[id].clear(),delete dispatchTables[id]},proto$0.isDispatching=function(){return IS_DISPATCHING},proto$0.createActions=function(spec){return createActions(spec,this)},proto$0.waitFor=function(){var SLICE$0=Array.prototype.slice,ids=SLICE$0.call(arguments,0),this$0=this;invariant(IS_DISPATCHING||!this.currentDispatch,"Dispatcher.waitFor(...): Cannot call waitFor while not currently dispatching."),ids.forEach(function(id){return this$0.currentDispatch.isPending[id]?void invariant(this$0.currentDispatch.isPending[id],"Dispatcher.waitFor(...): Circular dependency detected while waiting for "+id):(invariant(dispatchTables[id],"Dispatcher.waitFor(...): "+id+" does not map to a registered dispatch table."),void this$0.currentDispatch.dispatchToTable(id,dispatchTables[id]))})},proto$0.dispatch=function(action,params){var this$0=this;return this.isDispatching()?(warning(!this.isDispatching(),"Dispatcher.dispatch(...): Cascading dispatch detected. \n"+("You have tried to dispatch an action of type '"+action.displayName()+("' while simultaneously dispatching an action of type '"+this.currentDispatch.payload.action.displayName())+"'. ")+"This action will be queued until the pending payload has finished dispatching. Actions should avoid cascading updates wherever possible."),this.queueDispatch(action,params)):void this.startDispatch(action,params,function(currentDispatch){IS_DISPATCHING=!0,this$0.currentDispatch=currentDispatch;try{for(var id in dispatchTables)currentDispatch.dispatchToTable(id,dispatchTables[id])}finally{IS_DISPATCHING=!1,this$0.currentDispatch=null,this$0.flushQueue()}})},proto$0.queueDispatch=function(action,params){this.isDispatching()||this.dispatch(action,params),this.queue.push({action:action,params:params})},proto$0.flushQueue=function(){for(var queued;queued=this.queue.pop();)this.dispatch(queued.action,queued.params)},proto$0.startDispatch=function(action,params,cb){cb(new Dispatch({action:action,params:params}))},MIXIN$0(Dispatcher.prototype,proto$0),proto$0=void 0,Dispatcher}();module.exports=Dispatcher},{"./Dispatch":53,"./lib/createActions":59,"./lib/invariant":63,"./lib/warning":65,"es6-map":2}],56:[function(require,module){var EventEmitter=require("events").EventEmitter,invariant=require("./lib/invariant"),setPending=(resolve=require("./lib/storeHelpers")).setPending,resolve=resolve.resolve,createDispatchTable=require("./lib/createDispatchTable"),CHANGE_EVENT="change",BaseStore=function(super$0){"use strict";function BaseStore(){this.displayName||(this.displayName="Store")}var PRS$0=function(o,t){return o.__proto__={a:t},o.a===t}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,s){for(var p in s)s.hasOwnProperty(p)&&DP$0(t,p,GOPD$0(s,p));return t},SP$0=Object.setPrototypeOf||function(o,p){return PRS$0?o.__proto__=p:DP$0(o,"__proto__",{value:p,configurable:!0,enumerable:!1,writable:!0}),o},OC$0=Object.create;PRS$0||MIXIN$0(BaseStore,super$0);var proto$0={};return null!==super$0&&SP$0(BaseStore,super$0),BaseStore.prototype=OC$0(null!==super$0?super$0.prototype:null,{constructor:{value:BaseStore,configurable:!0,writable:!0}}),DP$0(BaseStore,"prototype",{configurable:!1,enumerable:!1,writable:!1}),proto$0.emitChange=function(){this.emit(CHANGE_EVENT)},proto$0.addChangeListener=function(cb){this.on(CHANGE_EVENT,cb)},proto$0.removeChangeListener=function(cb){this.removeListener(CHANGE_EVENT,cb)},proto$0.setPending=function(){setPending(this)},proto$0.resolve=function(){resolve(this)},proto$0.handlers=function(){var SLICE$0=Array.prototype.slice,handlers=SLICE$0.call(arguments,0);return arguments.length?void(this.dispatchTable=createDispatchTable(handlers,this.displayName)):(invariant(this.dispatchTable,""+this.displayName+".handlers(): No handlers have been declared."),this.dispatchTable)},MIXIN$0(BaseStore.prototype,proto$0),proto$0=void 0,BaseStore}(EventEmitter);module.exports=BaseStore},{"./lib/createDispatchTable":61,"./lib/invariant":63,"./lib/storeHelpers":64,events:1}],57:[function(require,module){var createAction=require("./lib/createAction"),anyPending=require("./lib/storeHelpers").anyPending,fluent={Dispatcher:require("./Dispatcher"),createStore:require("./lib/createStore"),handler:require("./lib/createDispatchRecord"),anyPending:anyPending,ALL_ACTIONS:createAction(function(){},"ALL_ACTIONS")};module.exports=fluent},{"./Dispatcher":55,"./lib/createAction":58,"./lib/createDispatchRecord":60,"./lib/createStore":62,"./lib/storeHelpers":64}],58:[function(require,module){module.exports=function(fn,name,dispatcher){var functor=function(){fn.apply(functor,arguments)};return functor.displayName=function(){return name},functor.dispatch=function(params){dispatcher.dispatch(functor,params)},functor}},{}],59:[function(require,module){var createAction=require("./createAction");module.exports=function(actions,dispatcher){var definition={};for(var method in actions)definition[method]=createAction(actions[method],method,dispatcher);return definition}},{"./createAction":58}],60:[function(require,module){var invariant=require("./invariant");module.exports=function(action,handler){return invariant(action,"handler(...): You have tried to create a dispatch handler with a null or undefined Action type - this is usually an error."),[action,handler]}},{"./invariant":63}],61:[function(require,module){var invariant=require("./invariant"),DispatchTable=require("../DispatchTable"),TablePostfix="_DispatchTable";module.exports=function(handlers,displayName){handlers&&handlers.length||invariant(!1,"createDispatchTable(...): Store "+store.displayName+" has not declared any handlers.");var spec={displayName:(displayName?displayName:"")+TablePostfix};return new DispatchTable(handlers,spec)}},{"../DispatchTable":54,"./invariant":63}],62:[function(require,module){var BaseStore=require("../Store"),assign=require("object-assign");module.exports=function(spec){var Store=function(super$0){"use strict";function Store(){super$0.apply(this,arguments)}var PRS$0=function(o,t){return o.__proto__={a:t},o.a===t}({},{}),DP$0=Object.defineProperty,GOPD$0=Object.getOwnPropertyDescriptor,MIXIN$0=function(t,s){for(var p in s)s.hasOwnProperty(p)&&DP$0(t,p,GOPD$0(s,p));return t},SP$0=Object.setPrototypeOf||function(o,p){return PRS$0?o.__proto__=p:DP$0(o,"__proto__",{value:p,configurable:!0,enumerable:!1,writable:!0}),o},OC$0=Object.create;return PRS$0||MIXIN$0(Store,super$0),null!==super$0&&SP$0(Store,super$0),Store.prototype=OC$0(null!==super$0?super$0.prototype:null,{constructor:{value:Store,configurable:!0,writable:!0}}),DP$0(Store,"prototype",{configurable:!1,enumerable:!1,writable:!1}),Store}(BaseStore);return assign(Store.prototype,spec),new Store}},{"../Store":56,"object-assign":52}],63:[function(require,module){"use strict";var invariant=function(condition,format,a,b,c,d,e,f){if(!condition){var error;if(void 0===format)error=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var args=[a,b,c,d,e,f],argIndex=0;error=new Error("Invariant Violation: "+format.replace(/%s/g,function(){return args[argIndex++]}))}throw error.framesToPop=1,error}};module.exports=invariant},{}],64:[function(require,module){function any(xs,pred){for(var idx=-1,length=xs.length;++idx<length;)if(pred(xs[idx],idx,xs))return!0;return!1}var PENDING_TOKEN="PENDING_TOKEN";module.exports={setPending:function(store){store.pendingToken=PENDING_TOKEN,store.emitChange()},resolve:function(store){store.pendingToken=null,store.emitChange()},anyPending:function(){var SLICE$0=Array.prototype.slice,stores=SLICE$0.call(arguments,0);return any(stores,function(store){return store.pendingToken==PENDING_TOKEN})}}},{}],65:[function(require,module){"use strict";function emptyFunction(){}var warning=emptyFunction;module.exports=warning},{}]},{},[57])(57)});